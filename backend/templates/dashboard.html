<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard - SmartShop</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">

  <!-- Navbar -->
  <nav class="bg-teal-600 text-white p-4 flex justify-between items-center">
    <div class="text-2xl font-bold">SmartShop</div>
    <div class="space-x-4">
      <a href="/dashboard" class="hover:underline">Home</a>
      <a href="/products" class="hover:underline">Products</a>
      <a href="/wishlist" class="hover:underline">Wishlist</a>
      <a href="/cart" class="hover:underline">Cart</a>
      <a href="/auth/logout" class="hover:underline">Logout</a>
    </div>
  </nav>

  <!-- Header -->
  <div class="text-center mt-10">
    <h1 class="text-3xl font-bold mb-2">Welcome To Your Dashboard!</h1>
    <p class="text-gray-700">Here's a quick overview of your SmartShop activities.</p>
  </div>

  <!-- Action Buttons -->
  <div class="flex justify-center gap-4 mt-8 flex-wrap">
    <a href="/products" class="bg-teal-600 text-white px-6 py-2 rounded hover:bg-teal-700">ğŸ›ï¸ View Products</a>
    <a href="/wishlist" class="bg-pink-500 text-white px-6 py-2 rounded hover:bg-pink-600">ğŸ’– View Wishlist</a>
    <a href="/cart" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">ğŸ›’ View Cart</a>
    <a href="/orders" class="bg-gray-800 text-white px-6 py-2 rounded hover:bg-gray-900">ğŸ“„ View Orders</a>
  </div>

  <!-- Personalized Stats -->
  <div class="max-w-7xl mx-auto mt-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 px-4">
    <div class="bg-white shadow rounded p-6 text-center">
      <h2 class="text-xl font-semibold mb-2">ğŸ“¦ Total Orders</h2>
      <p class="text-3xl text-gray-700 font-bold">{{ total_orders }}</p>
    </div>
    <div class="bg-white shadow rounded p-6 text-center">
      <h2 class="text-xl font-semibold mb-2">ğŸ’– Wishlist Items</h2>
      <p class="text-3xl text-gray-700 font-bold">{{ wishlist_count }}</p>
    </div>
    <div class="bg-white shadow rounded p-6 text-center">
      <h2 class="text-xl font-semibold mb-2">ğŸ›’ Cart Items</h2>
      <p class="text-3xl text-gray-700 font-bold">{{ cart_count }}</p>
    </div>
    <div class="bg-white shadow rounded p-6 text-center">
      <h2 class="text-xl font-semibold mb-2">ğŸ‘¤ Account Type</h2>
      <p class="text-lg text-gray-700 font-bold">{{ account_type }}</p>
    </div>
  </div>

  <!-- Recent Orders -->
  <div class="max-w-7xl mx-auto mt-12 px-4">
    <h2 class="text-2xl font-bold mb-4">ğŸ“¦ Recent Orders</h2>
    <div class="bg-white shadow rounded overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead class="bg-gray-100 text-gray-600 uppercase text-xs">
          <tr>
            <th class="px-6 py-3 text-center">Order ID</th>
            <th class="px-6 py-3 text-center">Date</th>
            <th class="px-6 py-3 text-center">Total</th>
            <th class="px-6 py-3 text-center">Status</th>
            <th class="px-6 py-3 text-center">Payment MODE</th>
          </tr>
        </thead>
        <tbody>
          {% for order in recent_orders %}
          <tr class="border-t hover:bg-gray-50 transition">
            <td class="px-6 py-3 text-center">{{ order.id }}</td>
            <td class="px-6 py-3 text-center">{{ order.date }}</td>
            <td class="px-6 py-3 text-teal-600 font-bold text-center">â‚¹{{ order.total }}</td>
            <td class="px-6 py-3 text-center">{{ order.status }}</td>
            <td class="px-6 py-3 text-center">COD</td>
          </tr>
          {% else %}
          <tr>
            <td colspan="5" class="px-6 py-3 text-center text-gray-500">No recent orders</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- AI Assistant Toggle Button -->
  <div class="fixed bottom-6 right-6 z-40">
    <button onclick="toggleAI()" class="bg-teal-600 text-white p-3 rounded-full shadow-lg hover:bg-teal-700" aria-label="Toggle AI Assistant">
      ğŸ¤–
    </button>
  </div>

  <!-- AI Assistant Box -->
  <div id="aiBox" class="fixed bottom-20 right-6 bg-white border shadow-lg rounded-lg p-4 w-80 hidden z-50">
    <h3 class="text-lg font-semibold mb-2">ğŸ§  Ask AI Assistant</h3>
    <form action="/ask?from_page=dashboard" method="post">
      <input type="text" name="message" placeholder="Ask about your orders, account..." required class="w-full px-3 py-2 border border-gray-300 rounded mb-2" />
      <button type="submit" class="bg-teal-600 text-white px-4 py-2 rounded hover:bg-teal-700 w-full">Ask</button>
    </form>
    {% if reply %}
    <div class="bg-gray-100 border rounded p-2 mt-2 text-sm max-h-40 overflow-y-auto">
      <strong>AI says:</strong><br>
      {{ reply | replace("\n", "<br>") | safe }}
    </div>
    {% endif %}
  </div>

  <!-- Scripts -->
  <script>
    function toggleAI() {
      document.getElementById('aiBox').classList.toggle('hidden');
    }
  </script>

</body>
</html>
